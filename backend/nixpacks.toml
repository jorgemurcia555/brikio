# Nixpacks configuration for Railway
# This tells Railway how to build the NestJS backend

[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
cmds = [
  "PUPPETEER_SKIP_DOWNLOAD=true npm ci --prefer-offline --no-audit --progress=false --loglevel=error || PUPPETEER_SKIP_DOWNLOAD=true npm install --prefer-offline --no-audit --progress=false --loglevel=error"
]

[phases.build]
cmds = ["npm run build"]

[start]
cmd = "npm run start:prod"

